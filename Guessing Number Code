import random

# Function to get player's name and store it
def getPlayerName():
    playerName = input("Enter your name: ").strip()
    
    # Save player's name to a file
    with open("players.txt", "a") as file:
        file.write(playerName + "\n")
    
    return playerName

# Function to play the game
def playGame(playerName):
    guessNumber = random.randint(1, 100)
    guessCount = 0

    print("\nWelcome to the Number Guessing Game!")
    input("Press Enter to start...")

    while True:
        userInput = input("Enter a number from 1-100: ")

        # Ensure input is a valid integer
        if userInput.isdigit():
            userInput = int(userInput)
        else:
            print("Invalid input! Please enter a number between 1 and 100.")
            continue  # Restart the loop if input is not a number

        if 1 <= userInput <= 100:
            if userInput > guessNumber:
                print("Your number is too high")
            elif userInput < guessNumber:
                print("Your number is too low")
            else:
                print(f"Congratulations, {playerName}! You guessed the number in {guessCount + 1} tries.")
                
                # Save player score to scoreboard
                saveScore(playerName, guessCount + 1)
                break

            guessCount += 1  # Increment guess count
        else:
            print("Out of range! Please enter a number between 1 and 100.")

# Function to save score to a file
def saveScore(playerName, score):
    with open("scoreboard.txt", "a") as file:
        file.write(f"{playerName}: {score}\n")

# Function to display the scoreboard
def displayScoreboard():
    print("\n--- SCOREBOARD ---")
    try:
        with open("scoreboard.txt", "r") as file:
            scores = file.readlines()
            if scores:
                for score in scores:
                    print(score.strip())
            else:
                print("No scores recorded yet.")
    except FileNotFoundError:
        print("No scores recorded yet.")

# Main game loop
while True:
    playerName = getPlayerName()
    playGame(playerName)
    
    playAgain = input("Do you want to play again? (y/n): ").strip().lower()
    if playAgain != 'y':
        print("Thank you for playing!")
        displayScoreboard()  # Show final scoreboard
        break
